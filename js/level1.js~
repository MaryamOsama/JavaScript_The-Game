
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var flagToStart=0;
var canvas = document.getElementById("myCanvas");

function level1(){

console.log("Level1");
var paddlex=(canvas.width-200)/2;
var shape =new String();
var shape=[
    "111111111111111111",
    "1 2121 2121 1212 1",
    "1  21   21   21  1",
    "1  21   21   21  1",
    "1  21   21   21  1",
    "1  21   21   21  1",
    "1 2121  21  1212 1",
    "111111111111111111",
];
var paddle1=new paddle(150,paddlex);
var ball=new Ball(canvas.width/2-35, canvas.height-paddle1.paddleHeight-60, 30);
var brick1=new brick(53,40,3);

var bricks=brick1.init(shape);
var rightPressed = false;
var leftPressed = false;
var image=new Image(canvas.width,canvas.height);
image.src="img/c.jpg";
var setup=new GameProgress();
setup.init(0,0,0,5,-5);
 


document.addEventListener("keydown", keyDownHandler, false);
document.addEventListener("keyup", keyUpHandler, false);

function keyDownHandler(e) {
    if(e.keyCode == 39) {
        rightPressed = true;
    }
    else if(e.keyCode == 37) {
        leftPressed = true;
    }
}
function keyUpHandler(e) {
    if(e.keyCode == 39) {
        rightPressed = false;
    }
    else if(e.keyCode == 37) {
        leftPressed = false;
    }
}
canvas.addEventListener('click',function () {
    console.log("event done");
    flagToStart=1;

},false)
function draw(){
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    //ctx.drawImage(image,0, 0); 
    paddle1.drawPaddle();
    ball.drawBall();
    

    brick1.drawBricks(bricks,shape);
    
       
    
    
    if (rightPressed && paddle1.paddleX < canvas.width-paddle1.paddleWidth) {
        paddle1.paddleX += 7;
       
    }
    else if(leftPressed && paddle1.paddleX > 0) {
        paddle1.paddleX -= 7;
    }

    if(ball.ballX + setup.dx > canvas.width-ball.ballRadius|| ball.ballX + setup.dx < ball.ballRadius) {
        setup.dx = -setup.dx;
    }
    if(ball.ballY + setup.dy < ball.ballRadius) {
        setup.dy = -setup.dy;
    }
    else if(ball.ballY + setup.dy > canvas.height-ball.ballRadius) {
        if(ball.ballX > paddle1.paddleX && ball.ballX < paddle1.paddleX + paddle1.paddleWidth) {
            setup.dy = -setup.dy;
        }  else {
            /* setup.lives--;
            if(!setup.lives) {
                alert("Game Over");
                document.location.reload();
            }
            else { */
                ball.ballX = canvas.width/2-35;
                ball.ballY = canvas.height-paddle1.paddleHeight-60;
                //setup.init(-3);
                paddle.paddleX = (canvas.width-paddle.paddleWidth)/2;
            //}
        }
        }
        
        if(flagToStart==1) {
            ball.ballX += setup.dx;
            ball.ballY += setup.dy;
           // badge.badgeY += 5;
        }
            
    
 requestAnimationFrame(draw);
}
}
//level1();
//draw();
//setInterval(draw, 10);






